---
  - name: Configure Workspace
    hosts: localhost
    tasks:
      - name: Brew Taps
        homebrew_tap:
          name: "{{ item }}"
          state: present
        loop:
          - instrumenta/instrumenta
          - chef/chef
          - homebrew/cask-fonts 

      - name: Upgrade Homebrew
        homebrew:
          update_homebrew: yes

      - name: Install Brew Packages
        homebrew:
          name: "{{ packages }}"
          state: present
        vars:
          packages:
            - ansible
            - ansible-lint
            - atlantis
            - awscli
            - aws-cdk
            - aws-keychain
            - bash
            - bazel
            - bfg
            - binutils
            - cfn-lint
            - cfssl
            - checkbashisms
            - clair
            - cloudformation-cli
            - cloud-nuke
            - conftest
            - consul
            - curl
            - diffutils
            - doctl
            - dos2unix
            - eksctl
            - eksctl-aws-iam-authenticator
            - exercism
            - findutils
            - flyway
            - gawk
            - git
            - gnu-getopt
            - gnu-indent
            - gnu-sed
            - gnu-tar
            - go
            - hadolint
            - helm
            - httpie
            - hugo
            - iftop
            - istioctl
            - kops
            - kubernetes-cli
            - jq
            - linkerd
            - mas
            - minikube
            - mosh
            - mpv
            - mtr
            - nmap
            - openssh
            - packer
            - pre-commit
            - prettyping
            - prometheus
            - pulumi
            - pwgen
            - ruby
            - sceptre
            - sops
            - shellcheck
            - sqlite
            - task
            - telnet
            - terraform
            - terraform-docs
            - terragrunt
            - tflint
            - vault
            - vim
            - watch
            - wget
            - youtube-dl
            - zsh

      - name: Install Brew Cask Packages
        homebrew_cask:
          name: "{{ packages }}"
          state: present
        vars:
          packages:
            - alfred
            - balenaetcher
            - bartender
            - caffeine
            - cyberduck
            - dash
            - docker
            - dropbox
            - firefox
            - flux
            - fly
            - font-fira-code
            - font-source-code-pro-for-powerline
            - goland
            - google-chrome
            - intel-power-gadget
            - istat-menus
            - iterm2
            - micro-snitch
            - muzzle
            - nordvpn
            - opera
            - sentinel
            - session-manager-plugin
            - shiftit
            - slack
            - spotify
            - sublime-text
            - the-unarchiver
            - vagrant
            - virtualbox
            - viscosity
            - visual-studio-code
            - vlc
            - zoomus